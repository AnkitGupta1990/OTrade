<html>
<body>
<div id="btw"></div>
<button onclick="refresh()">Refresh</button>
CE
<table border='1' style='border-collapse:collapse;font-size:12px;' width="100%" cellpadding='2' id="ceList">
<thead><tr><th>SYMBOL</th><th>STRIKE</th><th>PRICE</th><th>OPEN</th><th>LOW</th></tr></thead>
<tbody>
</tbody>
</table>
PE
<table border='1' style='border-collapse:collapse;font-size:12px;' width="100%" cellpadding='2' id="peList">
<thead><tr><th>SYMBOL</th><th>STRIKE</th><th>PRICE</th><th>OPEN</th><th>LOW</th></tr></thead>
<tbody>
</tbody>
</table>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.7/js/jquery.dataTables.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-sheetrock/1.0.1/dist/sheetrock.min.js"></script>
<script> 
var stocks = [['ACC','CE','1640.00'],['ADANIENT','CE','135.00'],['ADANIPORTS','CE','390.00'],['ADANIPOWER','CE','52.50'],['AJANTPHARM','CE','1040.00'],['ALBK','CE','50.00'],['AMARAJABAT','CE','670.00'],['AMBUJACEM','CE','225.00'],['APOLLOHOSP','CE','1260.00'],['APOLLOTYRE','CE','210.00'],['ARVIND','CE','90.00'],['ASHOKLEY','CE','90.00'],['ASIANPAINT','CE','1460.00'],['AUROPHARMA','CE','810.00'],['AXISBANK','CE','750.00'],['BAJAJ-AUTO','CE','3100.00'],['BAJAJFINSV','CE','7700.00'],['BAJFINANCE','CE','3100.00'],['BALKRISIND','CE','940.00'],['BANKBARODA','CE','122.50'],['BANKINDIA','CE','92.50'],['BATAINDIA','CE','1480.00'],['BEL','CE','87.50'],['BEML','CE','920.00'],['BERGEPAINT','CE','325.00'],['BHARATFIN','CE','1060.00'],['BHARATFORG','CE','480.00'],['BHARTIARTL','CE','339.75'],['BHEL','CE','73.00'],['BIOCON','CE','630.00'],['BOSCHLTD','CE','18000.00'],['BPCL','CE','360.00'],['BRITANNIA','CE','3000.00'],['BSOFT','CE','100.00'],['CADILAHC','CE','325.00'],['CANBK','CE','275.00'],['CANFINHOME','CE','330.00'],['CASTROLIND','CE','157.50'],['CEATLTD','CE','1100.00'],['CENTURYTEX','CE','940.00'],['CESC','CE','690.00'],['CGPOWER','CE','40.00'],['CHENNPETRO','CE','260.00'],['CHOLAFIN','CE','1420.00'],['CIPLA','CE','560.00'],['COALINDIA','CE','255.00'],['COLPAL','CE','1220.00'],['CONCOR','CE','496.00'],['CUMMINSIND','CE','740.00'],['DABUR','CE','400.00'],['DCBBANK','CE','215.00'],['DHFL','CE','150.00'],['DISHTV','CE','37.00'],['DIVISLAB','CE','1740.00'],['DLF','CE','180.00'],['DRREDDY','CE','2950.00'],['EICHERMOT','CE','20500.00'],['ENGINERSIN','CE','115.00'],['EQUITAS','CE','130.00'],['ESCORTS','CE','760.00'],['EXIDEIND','CE','215.00'],['FEDERALBNK','CE','96.00'],['GAIL','CE','345.00'],['GLENMARK','CE','650.00'],['GMRINFRA','CE','18.00'],['GODFRYPHLP','CE','1140.00'],['GODREJCP','CE','660.00'],['GODREJIND','CE','520.00'],['GRASIM','CE','930.00'],['GSFC','CE','105.00'],['HAVELLS','CE','780.00'],['HCLTECH','CE','1140.00'],['HDFC','CE','1960.00'],['HDFCBANK','CE','2280.00'],['HEROMOTOCO','CE','2650.00'],['HEXAWARE','CE','345.00'],['HINDALCO','CE','197.50'],['HINDPETRO','CE','275.00'],['HINDUNILVR','CE','1740.00'],['HINDZINC','CE','275.00'],['IBULHSGFIN','CE','740.00'],['ICICIBANK','CE','400.00'],['ICICIPRULI','CE','370.00'],['IDBI','CE','45.00'],['IDEA','CE','17.00'],['IDFC','CE','44.00'],['IDFCFIRSTB','CE','54.00'],['IFCI','CE','13.00'],['IGL','CE','310.00'],['INDIACEM','CE','110.00'],['INDIANB','CE','260.00'],['INDIGO','CE','1500.00'],['INDUSINDBK','CE','1680.00'],['INFIBEAM','CE','47.50'],['INFRATEL','CE','275.00'],['INFY','CE','740.00'],['IOC','CE','155.00'],['IRB','CE','135.00'],['ITC','CE','307.50'],['JETAIRWAYS','CE','180.00'],['JINDALSTEL','CE','170.00'],['JISLJALEQS','CE','60.00'],['JSWSTEEL','CE','290.00'],['JUBLFOOD','CE','1340.00'],['JUSTDIAL','CE','580.00'],['KAJARIACER','CE','620.00'],['KOTAKBANK','CE','1360.00'],['KSCL','CE','470.00'],['KTKBANK','CE','130.00'],['L&TFH','CE','137.50'],['LICHSGFIN','CE','500.00'],['LT','CE','1360.00'],['LUPIN','CE','880.00'],['M&M','CE','670.00'],['M&MFIN','CE','420.00'],['MANAPPURAM','CE','122.50'],['MARICO','CE','360.00'],['MARUTI','CE','6900.00'],['MCDOWELL-N','CE','550.00'],['MCX','CE','810.00'],['MFSL','CE','440.00'],['MGL','CE','970.00'],['MINDTREE','CE','1000.00'],['MOTHERSUMI','CE','150.00'],['MRF','CE','55500.00'],['MRPL','CE','72.00'],['MUTHOOTFIN','CE','590.00'],['NATIONALUM','CE','53.00'],['NBCC','CE','59.00'],['NCC','CE','105.00'],['NESTLEIND','CE','10900.00'],['NHPC','CE','24.00'],['NIITTECH','CE','1300.00'],['NMDC','CE','102.50'],['NTPC','CE','135.00'],['OFSS','CE','3550.00'],['OIL','CE','180.00'],['ONGC','CE','170.00'],['ORIENTBANK','CE','100.00'],['PAGEIND','CE','23500.00'],['PCJEWELLER','CE','132.50'],['PEL','CE','2600.00'],['PETRONET','CE','240.00'],['PFC','CE','120.00'],['PIDILITIND','CE','1220.00'],['PNB','CE','87.50'],['POWERGRID','CE','192.50'],['PVR','CE','1740.00'],['RAMCOCEM','CE','800.00'],['RAYMOND','CE','780.00'],['RBLBANK','CE','670.00'],['RECLTD','CE','150.00'],['RELCAPITAL','CE','160.00'],['RELIANCE','CE','1380.00'],['RELINFRA','CE','125.00'],['REPCOHOME','CE','440.00'],['RPOWER','CE','8.00'],['SAIL','CE','57.00'],['SBIN','CE','310.00'],['SHREECEM','CE','20000.00'],['SIEMENS','CE','1220.00'],['SOUTHBANK','CE','17.00'],['SRF','CE','2550.00'],['SRTRANSFIN','CE','1160.00'],['STAR','CE','480.00'],['SUNPHARMA','CE','470.00'],['SUNTV','CE','580.00'],['SUZLON','CE','8.00'],['SYNDIBANK','CE','40.00'],['TATACHEM','CE','580.00'],['TATACOMM','CE','580.00'],['TATAELXSI','CE','940.00'],['TATAGLOBAL','CE','215.00'],['TATAMOTORS','CE','225.00'],['TATAMTRDVR','CE','107.50'],['TATAPOWER','CE','68.00'],['TATASTEEL','CE','520.00'],['TCS','CE','2220.00'],['TECHM','CE','820.00'],['TITAN','CE','1160.00'],['TORNTPHARM','CE','1740.00'],['TORNTPOWER','CE','255.00'],['TV18BRDCST','CE','34.00'],['TVSMOTOR','CE','520.00'],['UBL','CE','1480.00'],['UJJIVAN','CE','330.00'],['ULTRACEMCO','CE','4650.00'],['UNIONBANK','CE','90.00'],['UPL','CE','970.00'],['VEDL','CE','175.00'],['VGUARD','CE','220.00'],['VOLTAS','CE','620.00'],['WIPRO','CE','296.25'],['WOCKPHARMA','CE','430.00'],['YESBANK','CE','240.00'],['ZEEL','CE','420.00'],['ACC','PE','1620.00'],['ADANIENT','PE','130.00'],['ADANIPORTS','PE','380.00'],['ADANIPOWER','PE','50.00'],['AJANTPHARM','PE','1020.00'],['ALBK','PE','49.00'],['AMARAJABAT','PE','660.00'],['AMBUJACEM','PE','220.00'],['APOLLOHOSP','PE','1240.00'],['APOLLOTYRE','PE','205.00'],['ARVIND','PE','87.50'],['ASHOKLEY','PE','87.50'],['ASIANPAINT','PE','1440.00'],['AUROPHARMA','PE','790.00'],['AXISBANK','PE','740.00'],['BAJAJ-AUTO','PE','3050.00'],['BAJAJFINSV','PE','7600.00'],['BAJFINANCE','PE','3050.00'],['BALKRISIND','PE','920.00'],['BANKBARODA','PE','120.00'],['BANKINDIA','PE','90.00'],['BATAINDIA','PE','1460.00'],['BEL','PE','86.80'],['BEML','PE','900.00'],['BERGEPAINT','PE','320.00'],['BHARATFIN','PE','1040.00'],['BHARATFORG','PE','470.00'],['BHARTIARTL','PE','330.55'],['BHEL','PE','72.00'],['BIOCON','PE','620.00'],['BOSCHLTD','PE','17750.00'],['BPCL','PE','350.00'],['BRITANNIA','PE','2950.00'],['BSOFT','PE','95.00'],['CADILAHC','PE','320.00'],['CANBK','PE','270.00'],['CANFINHOME','PE','320.00'],['CASTROLIND','PE','155.00'],['CEATLTD','PE','1080.00'],['CENTURYTEX','PE','920.00'],['CESC','PE','680.00'],['CGPOWER','PE','39.00'],['CHENNPETRO','PE','255.00'],['CHOLAFIN','PE','1400.00'],['CIPLA','PE','555.00'],['COALINDIA','PE','250.00'],['COLPAL','PE','1200.00'],['CONCOR','PE','490.00'],['CUMMINSIND','PE','720.00'],['DABUR','PE','395.00'],['DCBBANK','PE','210.00'],['DHFL','PE','140.00'],['DISHTV','PE','36.00'],['DIVISLAB','PE','1720.00'],['DLF','PE','175.00'],['DRREDDY','PE','2900.00'],['EICHERMOT','PE','20000.00'],['ENGINERSIN','PE','112.50'],['EQUITAS','PE','127.50'],['ESCORTS','PE','740.00'],['EXIDEIND','PE','210.00'],['FEDERALBNK','PE','95.00'],['GAIL','PE','340.00'],['GLENMARK','PE','640.00'],['GMRINFRA','PE','17.00'],['GODFRYPHLP','PE','1120.00'],['GODREJCP','PE','650.00'],['GODREJIND','PE','510.00'],['GRASIM','PE','920.00'],['GSFC','PE','102.50'],['HAVELLS','PE','770.00'],['HCLTECH','PE','1120.00'],['HDFC','PE','1950.00'],['HDFCBANK','PE','2260.00'],['HEROMOTOCO','PE','2600.00'],['HEXAWARE','PE','340.00'],['HINDALCO','PE','195.00'],['HINDPETRO','PE','270.00'],['HINDUNILVR','PE','1720.00'],['HINDZINC','PE','270.00'],['IBULHSGFIN','PE','720.00'],['ICICIBANK','PE','395.00'],['ICICIPRULI','PE','360.00'],['IDBI','PE','43.00'],['IDEA','PE','16.30'],['IDFC','PE','42.00'],['IDFCFIRSTB','PE','53.00'],['IFCI','PE','12.00'],['IGL','PE','305.00'],['INDIACEM','PE','107.50'],['INDIANB','PE','250.00'],['INDIGO','PE','1480.00'],['INDUSINDBK','PE','1660.00'],['INFIBEAM','PE','45.00'],['INFRATEL','PE','270.00'],['INFY','PE','730.00'],['IOC','PE','152.50'],['IRB','PE','130.00'],['ITC','PE','305.00'],['JETAIRWAYS','PE','160.00'],['JINDALSTEL','PE','165.00'],['JISLJALEQS','PE','57.50'],['JSWSTEEL','PE','285.00'],['JUBLFOOD','PE','1320.00'],['JUSTDIAL','PE','560.00'],['KAJARIACER','PE','610.00'],['KOTAKBANK','PE','1340.00'],['KSCL','PE','460.00'],['KTKBANK','PE','127.50'],['L&TFH','PE','135.00'],['LICHSGFIN','PE','490.00'],['LT','PE','1340.00'],['LUPIN','PE','870.00'],['M&M','PE','660.00'],['M&MFIN','PE','410.00'],['MANAPPURAM','PE','120.00'],['MARICO','PE','355.00'],['MARUTI','PE','6800.00'],['MCDOWELL-N','PE','540.00'],['MCX','PE','800.00'],['MFSL','PE','430.00'],['MGL','PE','960.00'],['MINDTREE','PE','980.00'],['MOTHERSUMI','PE','145.00'],['MRF','PE','55000.00'],['MRPL','PE','71.00'],['MUTHOOTFIN','PE','580.00'],['NATIONALUM','PE','52.50'],['NBCC','PE','58.00'],['NCC','PE','102.50'],['NESTLEIND','PE','10800.00'],['NHPC','PE','23.00'],['NIITTECH','PE','1280.00'],['NMDC','PE','100.00'],['NTPC','PE','133.35'],['OFSS','PE','3500.00'],['OIL','PE','177.50'],['ONGC','PE','167.50'],['ORIENTBANK','PE','97.50'],['PAGEIND','PE','23000.00'],['PCJEWELLER','PE','130.00'],['PEL','PE','2550.00'],['PETRONET','PE','235.00'],['PFC','PE','117.50'],['PIDILITIND','PE','1200.00'],['PNB','PE','85.00'],['POWERGRID','PE','190.00'],['PVR','PE','1720.00'],['RAMCOCEM','PE','790.00'],['RAYMOND','PE','760.00'],['RBLBANK','PE','660.00'],['RECLTD','PE','149.00'],['RELCAPITAL','PE','150.00'],['RELIANCE','PE','1360.00'],['RELINFRA','PE','120.00'],['REPCOHOME','PE','420.00'],['RPOWER','PE','7.00'],['SAIL','PE','56.00'],['SBIN','PE','305.00'],['SHREECEM','PE','19750.00'],['SIEMENS','PE','1200.00'],['SOUTHBANK','PE','16.00'],['SRF','PE','2500.00'],['SRTRANSFIN','PE','1150.00'],['STAR','PE','470.00'],['SUNPHARMA','PE','460.00'],['SUNTV','PE','560.00'],['SUZLON','PE','7.00'],['SYNDIBANK','PE','39.00'],['TATACHEM','PE','570.00'],['TATACOMM','PE','570.00'],['TATAELXSI','PE','920.00'],['TATAGLOBAL','PE','210.00'],['TATAMOTORS','PE','220.00'],['TATAMTRDVR','PE','105.00'],['TATAPOWER','PE','67.50'],['TATASTEEL','PE','510.00'],['TCS','PE','2200.00'],['TECHM','PE','810.00'],['TITAN','PE','1140.00'],['TORNTPHARM','PE','1720.00'],['TORNTPOWER','PE','250.00'],['TV18BRDCST','PE','33.00'],['TVSMOTOR','PE','510.00'],['UBL','PE','1460.00'],['UJJIVAN','PE','320.00'],['ULTRACEMCO','PE','4600.00'],['UNIONBANK','PE','85.00'],['UPL','PE','960.00'],['VEDL','PE','170.00'],['VGUARD','PE','215.00'],['VOLTAS','PE','610.00'],['WIPRO','PE','295.00'],['WOCKPHARMA','PE','420.00'],['YESBANK','PE','230.00'],['ZEEL','PE','410.00']];

var ce_tbl_body = "";
var pe_tbl_body = "";
$.each(stocks, function(index,value) {
	var tbl_row = "";
	$.each(value, function(k , v) {
		if(v != 'CE' && v != 'PE') {
		    tbl_row += "<td>"+v+"</td>";
		}
	});
	tbl_row += "<td id='"+value[0]+"_current'>"+''+"</td>";
	tbl_row += "<td id='"+value[0]+"_open'>"+''+"</td>";
	tbl_row += "<td id='"+value[0]+"_low'>"+''+"</td>";
	if(value[1] == 'CE') {
		ce_tbl_body += "<tr id='"+value[0]+"'>"+tbl_row+"</tr>";
 	} else {
		pe_tbl_body += "<tr id='"+value[0]+"'>"+tbl_row+"</tr>";
	}
	          
})
$("#ceList tbody").html(ce_tbl_body);
$("#peList tbody").html(pe_tbl_body);

function refresh() {
$.each(stocks,function(index, value) {
	var query = "underlying="+value[0]+"&instrument=OPTSTK&expiry=30MAY2019&type="+value[1]+"&strike="+value[2];
	$.ajax({
	  type: "GET",
	  dataType: "json",
	  url: "https://www.nseindia.com/live_market/dynaContent/live_watch/get_quote/ajaxFOGetQuoteJSON.jsp?"+query,
	  success: function(msg) {
	     var open = msg.data[0].openPrice;
             var low = msg.data[0].lowPrice;
	     var current = msg.data[0].lastPrice;
             $("#btw").html('success : ' + current);
             if(low >= open) {
                $("#"+value[0]+"_current").html(current);
                $("#"+value[0]+"_open").html(open);
                $("#"+value[0]+"_low").html(low);
	     } else {
                stocks.splice(index,1)
                $("#"+value[0]).remove();
	     }
	  },
	  error:function (xhr, ajaxOptions, thrownError){
	     $("#btw").html('error : ' + xhr.status);
	  }
	});
});
}
refresh();
</script> 
